<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>搜图机器人后台</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-icon">搜图</div>
      <div>
        <h1>搜图机器人后台</h1>
        <p>清晰的数据看板与高效运营管理</p>
      </div>
    </div>
    <nav class="nav-tabs">
      <button data-tab="dashboard" class="active">数据看板</button>
      <button data-tab="templates">模板管理</button>
      <button data-tab="members">会员列表</button>
      <button data-tab="broadcast">群发消息</button>
    </nav>
  </header>

  <main>
    <section id="dashboard" class="tab">
      <div class="section-header">
        <div>
          <h2>数据看板</h2>
          <p>实时掌握用户与搜图活跃趋势</p>
        </div>
        <div class="tag">最近 7 天</div>
      </div>

      <div class="metric-panels">
        <div class="panel">
          <h3>用户数据</h3>
          <div class="metric-list">
            <div class="metric"><span>全部用户</span><strong id="usersTotal">0</strong></div>
            <div class="metric"><span>本周新增用户</span><strong id="usersWeekNew">0</strong></div>
            <div class="metric"><span>本月新增用户</span><strong id="usersMonthNew">0</strong></div>
            <div class="metric"><span>本周搜图人数</span><strong id="searchUsersWeek">0</strong></div>
            <div class="metric"><span>本月搜图人数</span><strong id="searchUsersMonth">0</strong></div>
          </div>
        </div>
        <div class="panel">
          <h3>会员数据</h3>
          <div class="metric-list">
            <div class="metric"><span>会员用户</span><strong id="membersTotal">0</strong></div>
            <div class="metric"><span>本周新增会员</span><strong id="membersWeekNew">0</strong></div>
            <div class="metric"><span>本月新增会员</span><strong id="membersMonthNew">0</strong></div>
            <div class="metric"><span>本周搜图数量</span><strong id="searchCountWeek">0</strong></div>
            <div class="metric"><span>本月搜图数量</span><strong id="searchCountMonth">0</strong></div>
          </div>
        </div>
      </div>

      <div class="chart-grid">
        <div class="panel">
          <div class="panel-header">
            <h3>近一周新增用户 / 会员</h3>
            <span class="panel-subtitle">双柱图</span>
          </div>
          <div id="chartNewUsers" class="chart"></div>
          <div class="chart-legend">
            <span><i class="dot dot-primary"></i>新增用户</span>
            <span><i class="dot dot-accent"></i>新增会员</span>
          </div>
        </div>
        <div class="panel">
          <div class="panel-header">
            <h3>近一周搜图数量与人数</h3>
            <span class="panel-subtitle">双柱图</span>
          </div>
          <div id="chartSearches" class="chart"></div>
          <div class="chart-legend">
            <span><i class="dot dot-primary"></i>搜图数量</span>
            <span><i class="dot dot-accent"></i>搜图人数</span>
          </div>
        </div>
      </div>
    </section>

    <section id="templates" class="tab hidden">
      <div class="section-header">
        <div>
          <h2>模板管理</h2>
          <p>调整消息模版内容，统一回复格式</p>
        </div>
      </div>
      <div class="panel form-panel">
        <form id="templateForm">
          <div class="form-grid">
            <label>模版 Key
              <input name="key" placeholder="如：welcome_message" required />
            </label>
            <label>模版类型
              <select name="type">
                <option value="search_reply">搜图回复</option>
                <option value="auto_reply">自动回复</option>
              </select>
            </label>
            <label class="form-span">回复内容
              <textarea name="content" placeholder="输入要发送的消息内容"></textarea>
            </label>
            <label class="form-span">按钮配置（JSON）
              <textarea name="buttons">[]</textarea>
            </label>
          </div>
          <div class="form-actions">
            <label class="switch">
              <input type="checkbox" name="is_enabled" checked />
              <span>启用模版</span>
            </label>
            <button type="submit" class="primary">保存模版</button>
          </div>
        </form>
      </div>
      <div class="panel">
        <div class="panel-header">
          <h3>模版列表</h3>
          <span class="panel-subtitle">最新记录</span>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="templateTable">
            <thead>
              <tr>
                <th>Key</th>
                <th>类型</th>
                <th>启用</th>
                <th>内容</th>
                <th>按钮</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="members" class="tab hidden">
      <div class="section-header">
        <div>
          <h2>会员列表</h2>
          <p>查看最近更新的会员信息</p>
        </div>
      </div>
      <div class="panel">
        <div class="table-wrap">
          <table class="data-table" id="memberTable">
            <thead>
              <tr>
                <th>用户 ID</th>
                <th>到期时间</th>
                <th>来源群组</th>
                <th>状态</th>
                <th>更新时间</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="broadcast" class="tab hidden">
      <div class="section-header">
        <div>
          <h2>群发消息</h2>
          <p>一键触达全部会员用户</p>
        </div>
      </div>
      <div class="panel form-panel">
        <form id="broadcastForm">
          <label>群发内容
            <textarea name="content" placeholder="输入群发内容" required></textarea>
          </label>
          <button type="submit" class="primary">发送群发</button>
        </form>
      </div>
      <div class="panel">
        <div class="panel-header">
          <h3>群发记录</h3>
          <span class="panel-subtitle">最近 50 条</span>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="broadcastTable">
            <thead>
              <tr>
                <th>内容</th>
                <th>发送时间</th>
                <th>送达人数</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
